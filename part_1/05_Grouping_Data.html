

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 5: Grouping the Data &#8212; An African flavour to Data Preprocessing Recipes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'part_1/05_Grouping_Data';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Chapter 6: Basic Data Explorations" href="06_Basic%20Data%20Explorations.html" />
    <link rel="prev" title="Chapter 4: Handling Text Data" href="04_Handling%20Text%20Data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/ending_ia.jpeg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/ending_ia.jpeg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    An African flavour to Data Preprocessing Recipes
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">1. An overview of Data Science tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../part_0/00_The%20hype%20of%20Data%20Science.html">Chapter 1: The Data Science Ecosystem</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../part_0/01_Getting%20Started%20with%20Jupyter%20and%20Colab.html">Chapter 2: Getting started with Jupyter and Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_0/02_Python_for_Data_Science.html">Chapter 3: Introduction to Python for Data Science</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2. Dealing with tabular data</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_Refresher%20on%20Series%20and%20DataFrame.html">Chapter 1: Working with Series and DataFrames</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_Data_Reading_Methods.html">Chapter 2: Data Reading Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Tidying_the_Data.html">Chapter 3: Introducing Features and Observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_Handling%20Text%20Data.html">Chapter 4: Handling Text Data</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 5: Grouping the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_Basic%20Data%20Explorations.html">Chapter 6: Basic Data Explorations</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_Data%20Organization%20Methods.html">Chapter 7: Data Organization Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_Customizing%20functions.html">Chapter 8: Customizing Functions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3. Dealing with Time Series</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part_2/01_Working%20with%20Time%20Data.html">Chapter 1: Working with Time Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_2/02_Basic%20Data%20Manipulation%20%20on%20Time%20Series_OK.html">Chapter 2: Basic Data Manipulation  on Time Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_2/03_%20Advanced%20Manipulation%20on%20Time%20Series_OK.html">Chapter 3: Advanced Manipulation on Time Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_2/04_Framing%20TimeSeries%20_OK.html">Chapter 4: Framing Time Series</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4. Dealing with Image data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part_3/01_Introduction%20to%20Image%20Data.html">Chapter 1: Introduction to Image Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_3/02_Basic_Image%20Pre-processing_operations.html">Chapter 2: Basic Image Pre-processing operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_3/03_Advanced%20Image%20Pre-processing%20operations.html">Chapter 3: Advanced Image Pre-processing operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_3/04_Feature%20Extraction%20from%20Images_SVD.html">Chapter 4: Feature Extraction from Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_3/05_Preparing%20Images%20Data%20for%20Model%20Training.html">Chapter 5: Preparing Image Data for Model Training</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5. Dealing with Text data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../part_4/01_Strings%20as%20Text%20Data%20in%20Python.html">Chapter 1: Introduction to Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_4/02_Text%20Mining%20Operations.html">Chapter 2: Text Mining Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_4/03_Feature%20Extraction%20from%20Texts.html">Chapter 3: Feature Extraction from Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part_4/04_Word%20Embeddings.html">Chapter 4: Word Embeddings</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/rock-feller/rock-feller.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/rock-feller/rock-feller.github.io/issues/new?title=Issue%20on%20page%20%2Fpart_1/05_Grouping_Data.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/part_1/05_Grouping_Data.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 5: Grouping the Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#splitting">Splitting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#font-color-800080-task-15-font-a-class-anchor-id-task-1-a"><font color="#800080">Task 15:</font> <a class="anchor" id="Task-1"></a></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applying">Applying</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transformation">Transformation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtration">Filtration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#font-color-800080-task-14-font-a-class-anchor-id-task-1-a"><font color="#800080">Task 14:</font> <a class="anchor" id="Task-1"></a></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><font color="#800080">Task 15:</font> <a class="anchor" id="Task-1"></a></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tex2jax_ignore mathjax_ignore section" id="chapter-5-grouping-the-data">
<h1>Chapter 5: Grouping the Data<a class="headerlink" href="#chapter-5-grouping-the-data" title="Permalink to this heading">#</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>In data analysis tasks, the insights often can be unveiled when the data are aggregated or grouped. Such type of operations play a pivotal role in real-world applications by enabling powerful data analysis and decision-making. The ability to group data based on specific criteria and perform aggregations and transformations opens up a multitude of possibilities. For instance,</p>
<ul class="simple">
<li><p><strong>In finance</strong>, groupby operations could be used by Nigerian Exchange Group (formerly known Nigeria Stock Exchange) to analyze market trends and identify patterns in stock or bond prices.</p></li>
<li><p><strong>In marketing</strong>, they could help Tanzlite Agency (in Dar Es Salaam, Tanzania) understand their customer segments and behavior for targeted campaigns.</p></li>
<li><p><strong>In healthcare</strong>, groupby operations could aid Data Analyst interns at the Regional Hospital of Limbe, Cameroon in examining patient data to identify disease patterns and provide insights foe the medical doctor to devise personalized treatments.</p></li>
<li><p><strong>in operations management</strong>, these operations could be used by Bollore Logistics  to enable efficient resource allocation and optimization.</p></li>
</ul>
<p>The pandas module offer a variety of operations under the <code class="docutils literal notranslate"><span class="pre">groupby</span></code> API.Those groupby operations provide valuable insights and facilitate data-driven decision-making across various domains, making them indispensable in real-world applications. In this section, we will present some of them including <strong>splitting, applying and combining</strong>.</p>
</div>
<div class="section" id="splitting">
<h2>Splitting<a class="headerlink" href="#splitting" title="Permalink to this heading">#</a></h2>
<p>Lets take a look at the Nobel Prize dataset winners to understand some of the groupby operations. Let’s load the <code class="docutils literal notranslate"><span class="pre">nobel_winners.csv</span></code> file.</p>
<p>The <strong>Pandas dataframe.groupby()</strong> function is used to split the data into groups based on some criteria. The abstract definition of grouping is to provide a mapping of labels to group names.</p>
<blockquote>
<div></div></blockquote>
<div class="section" id="font-color-800080-task-15-font-a-class-anchor-id-task-1-a">
<h3><font color=#800080>Task 15:</font> <a class="anchor" id="Task-1"></a><a class="headerlink" href="#font-color-800080-task-15-font-a-class-anchor-id-task-1-a" title="Permalink to this heading">#</a></h3>
</div>
<p>One of the key moments of the Russia-Africa Summit that was held in St Petersburg last July, was the speech delivred  bythe 35 years old president of Burkina Faso, Captain Ibrahim Traoré. More specifically, he said:  <strong>“My generation does not understand this: how can Africa, which has so much wealth, become the poorest continent in the world today? And why African leaders travel the world to beg,”</strong>
“””
That statement has ignited a sense of patriotism and unity among African leaders. One of the resolutions made immediately after the Summit was the exchange of skills between Russian and African farmers. Consequently, a call for applications was initiated throughout Africa, allowing farmers to apply and compete for the opportunity to win the <strong>Nancy Abeid Prize</strong> (in honor of Nancy Abeid Arahamane, who established Africa’s first camel milk dairy in 1989).</p>
<p>The Prize essentially acknowledges farmers based on the height and width of their crops for four different types of grain: <em>Coffee</em>, <em>Beans</em>, <em>Maize</em>, and <em>Wheat</em>. The winning farmers will receive funding to expand their businesses and have their products promoted throughout the continent, fostering potential partnerships with industries in the future. The results are enclosed in a csv file called <code class="docutils literal notranslate"><span class="pre">grain_award.csv</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grain_prize</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/grain_award.csv&#39;</span><span class="p">)</span>
<span class="n">grain_prize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>birth_country</th>
      <th>gender</th>
      <th>grainType</th>
      <th>cropHeight</th>
      <th>cropWidth</th>
      <th>prize</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Siyabonga Luthuli</td>
      <td>South Africa</td>
      <td>Male</td>
      <td>wheat</td>
      <td>2.17</td>
      <td>3.07</td>
      <td>440000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Lucien Nirina</td>
      <td>Madagadscar</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.05</td>
      <td>3.03</td>
      <td>420000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Pauline Dossevi</td>
      <td>Togo</td>
      <td>Female</td>
      <td>beans</td>
      <td>2.16</td>
      <td>3.21</td>
      <td>290000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Garba Kone</td>
      <td>Burkina Faso</td>
      <td>Male</td>
      <td>maize</td>
      <td>2.18</td>
      <td>3.03</td>
      <td>440000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Adeyoyin Samuel</td>
      <td>Nigeria</td>
      <td>Male</td>
      <td>wheat</td>
      <td>1.95</td>
      <td>3.12</td>
      <td>220000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Geoffrey Birina</td>
      <td>Burundi</td>
      <td>Male</td>
      <td>wheat</td>
      <td>2.07</td>
      <td>3.05</td>
      <td>250000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sylvie Kurwa</td>
      <td>Rwanda</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.08</td>
      <td>3.18</td>
      <td>230000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Joao Pedro</td>
      <td>Angola</td>
      <td>Male</td>
      <td>beans</td>
      <td>2.11</td>
      <td>3.14</td>
      <td>150000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Maria Siphiwe</td>
      <td>Botswana</td>
      <td>Female</td>
      <td>maize</td>
      <td>2.06</td>
      <td>3.10</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Lejeune Bahati</td>
      <td>Congo</td>
      <td>Male</td>
      <td>wheat</td>
      <td>2.16</td>
      <td>3.11</td>
      <td>430000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Touadoum Nobre</td>
      <td>Chad</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.00</td>
      <td>3.11</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Ebale Gervais</td>
      <td>Cameroon</td>
      <td>Male</td>
      <td>maize</td>
      <td>2.01</td>
      <td>3.14</td>
      <td>390000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Fatema Nourdin</td>
      <td>Morocco</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.04</td>
      <td>3.08</td>
      <td>120000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Aboubakar Houn</td>
      <td>Mauritania</td>
      <td>Male</td>
      <td>beans</td>
      <td>1.88</td>
      <td>3.10</td>
      <td>270000</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Salif Cisse</td>
      <td>Mali</td>
      <td>Male</td>
      <td>wheat</td>
      <td>1.95</td>
      <td>3.02</td>
      <td>190000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Aicha Boumediene</td>
      <td>Algeria</td>
      <td>Female</td>
      <td>maize</td>
      <td>1.87</td>
      <td>3.09</td>
      <td>360000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Each row in this dataset represents a prize winner, the country of birth, the gender, the grain type, the crop height and width and the prize. At this stage, we can call the pandas <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code> function, to split the data into groups based on predefined criteria, usually a categorical column.  Lets start by grouping the data by gender. We do this by creating a <code class="docutils literal notranslate"><span class="pre">group_gen</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_gen</span> <span class="o">=</span><span class="n">grain_prize</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">)</span>
<span class="n">group_gen</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;pandas.core.groupby.generic.DataFrameGroupBy object at 0x7ff0abd538e0&gt;
</pre></div>
</div>
</div>
</div>
<p>It is important to note that creating a GroupBy object only checks if we have passed a correct mapping; it doesn’t really perform any of the operations. It simply re-organize the display of the dataframe according to the chosen criterion. We could check the content of the chosen criterion to see the different instances by which the the dataframe will be sorted by:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grain_prize</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Male&#39;, &#39;Female&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Using the <code class="docutils literal notranslate"><span class="pre">.first()</span></code> (or <code class="docutils literal notranslate"><span class="pre">.last()</span></code>) function, we could check the first few (or last) entries of the re-oganized dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_gen</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>birth_country</th>
      <th>grainType</th>
      <th>cropHeight</th>
      <th>cropWidth</th>
      <th>prize</th>
    </tr>
    <tr>
      <th>gender</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Female</th>
      <td>Pauline Dossevi</td>
      <td>Togo</td>
      <td>beans</td>
      <td>2.16</td>
      <td>3.21</td>
      <td>290000</td>
    </tr>
    <tr>
      <th>Male</th>
      <td>Siyabonga Luthuli</td>
      <td>South Africa</td>
      <td>wheat</td>
      <td>2.17</td>
      <td>3.07</td>
      <td>440000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Is important to note that the grouping can also be done using more than one column, simply by passing a list of columns as argument. To illustrate that, let’s group our data first by <code class="docutils literal notranslate"><span class="pre">gender</span></code> and then, inside each of the created groups, we will apply additional grouping based on the <code class="docutils literal notranslate"><span class="pre">grainType</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_gen_grType</span> <span class="o">=</span> <span class="n">grain_prize</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;gender&#39;</span> <span class="p">,</span> <span class="s1">&#39;grainType&#39;</span><span class="p">])</span> 
<span class="n">group_gen_grType</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Name</th>
      <th>birth_country</th>
      <th>cropHeight</th>
      <th>cropWidth</th>
      <th>prize</th>
    </tr>
    <tr>
      <th>gender</th>
      <th>grainType</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Female</th>
      <th>beans</th>
      <td>Pauline Dossevi</td>
      <td>Togo</td>
      <td>2.16</td>
      <td>3.21</td>
      <td>290000</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>Fatema Nourdin</td>
      <td>Morocco</td>
      <td>2.04</td>
      <td>3.08</td>
      <td>120000</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>Aicha Boumediene</td>
      <td>Algeria</td>
      <td>1.87</td>
      <td>3.09</td>
      <td>360000</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">Male</th>
      <th>beans</th>
      <td>Aboubakar Houn</td>
      <td>Mauritania</td>
      <td>1.88</td>
      <td>3.10</td>
      <td>270000</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>Touadoum Nobre</td>
      <td>Chad</td>
      <td>2.00</td>
      <td>3.11</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>Ebale Gervais</td>
      <td>Cameroon</td>
      <td>2.01</td>
      <td>3.14</td>
      <td>390000</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>Salif Cisse</td>
      <td>Mali</td>
      <td>1.95</td>
      <td>3.02</td>
      <td>190000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If instead, for some purpose,  we want to select a single group in a form of DataFrame, we should use the method <code class="docutils literal notranslate"><span class="pre">get_group()</span></code> on the GroupBy object, passing as an argument the sub-group instance we want to focus on. Let’s try and only focus on the prize winners in <code class="docutils literal notranslate"><span class="pre">coffee</span></code> grain type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_coffee</span> <span class="o">=</span> <span class="n">grain_prize</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;grainType&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="s1">&#39;coffee&#39;</span><span class="p">)</span>
<span class="n">group_coffee</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>birth_country</th>
      <th>gender</th>
      <th>grainType</th>
      <th>cropHeight</th>
      <th>cropWidth</th>
      <th>prize</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Lucien Nirina</td>
      <td>Madagadscar</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.05</td>
      <td>3.03</td>
      <td>420000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sylvie Kurwa</td>
      <td>Rwanda</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.08</td>
      <td>3.18</td>
      <td>230000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Touadoum Nobre</td>
      <td>Chad</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.00</td>
      <td>3.11</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Fatema Nourdin</td>
      <td>Morocco</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.04</td>
      <td>3.08</td>
      <td>120000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="applying">
<h2>Applying<a class="headerlink" href="#applying" title="Permalink to this heading">#</a></h2>
<p>After splitting the original data and (optionally) inspecting the resulting groups, we can perform one of the following operations or their combination (not necessarily in the given order) on each group:</p>
<ul class="simple">
<li><p><strong>Aggregation</strong>: calculating a summary statistic for each group (e.g., group sizes, means, medians, or sums) and outputting a single number for many data points.</p></li>
<li><p><strong>Transformation</strong>: conducting some operations by group, such as calculating the z-score for each group.</p></li>
<li><p><strong>Filtration</strong>: rejecting some groups based on a predefined condition, such as group size, mean, median, or sum. This can also include filtering out particular rows from each group.</p></li>
</ul>
<p><strong>Aggregation</strong></p>
<p>To aggregate the data of a GroupBy object (i.e., to calculate a summary statistic by group), we can either use built-in functions (like mean, max, min, std, median, sum, etc) from the groupby module or use the <code class="docutils literal notranslate"><span class="pre">agg()</span></code> method on the object:</p>
<p>For instance, we might be interested in the average of <code class="docutils literal notranslate"><span class="pre">cropHeight</span></code> and <code class="docutils literal notranslate"><span class="pre">cropWidth</span></code> (or any numerical column) per grain type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span> <span class="o">=</span>  <span class="n">grain_prize</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;grainType&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[[</span><span class="s1">&#39;cropHeight&#39;</span> <span class="p">,</span> <span class="s1">&#39;cropWidth&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cropHeight</th>
      <th>cropWidth</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beans</th>
      <td>2.0500</td>
      <td>3.150</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>2.0425</td>
      <td>3.100</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>2.0300</td>
      <td>3.090</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>2.0600</td>
      <td>3.074</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>or</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[[</span><span class="s1">&#39;cropHeight&#39;</span> <span class="p">,</span> <span class="s1">&#39;cropWidth&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cropHeight</th>
      <th>cropWidth</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beans</th>
      <td>2.0500</td>
      <td>3.150</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>2.0425</td>
      <td>3.100</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>2.0300</td>
      <td>3.090</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>2.0600</td>
      <td>3.074</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The code above combines all the prize winner per <code class="docutils literal notranslate"><span class="pre">grainType</span></code> and compute the average of both the <code class="docutils literal notranslate"><span class="pre">cropHeight</span></code> and the <code class="docutils literal notranslate"><span class="pre">cropWidth</span></code>.
It is possible to apply several functions at once to one or more columns of a GroupBy object. For this purpose, we again need the <code class="docutils literal notranslate"><span class="pre">agg()</span></code> method and a list of the functions of interest:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[[</span><span class="s1">&#39;cropHeight&#39;</span> <span class="p">,</span> <span class="s1">&#39;cropWidth&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span> <span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">cropHeight</th>
      <th colspan="3" halign="left">cropWidth</th>
    </tr>
    <tr>
      <th></th>
      <th>mean</th>
      <th>sum</th>
      <th>std</th>
      <th>mean</th>
      <th>sum</th>
      <th>std</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beans</th>
      <td>2.0500</td>
      <td>6.15</td>
      <td>0.149332</td>
      <td>3.150</td>
      <td>9.45</td>
      <td>0.055678</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>2.0425</td>
      <td>8.17</td>
      <td>0.033040</td>
      <td>3.100</td>
      <td>12.40</td>
      <td>0.062716</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>2.0300</td>
      <td>8.12</td>
      <td>0.128323</td>
      <td>3.090</td>
      <td>12.36</td>
      <td>0.045461</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>2.0600</td>
      <td>10.30</td>
      <td>0.107703</td>
      <td>3.074</td>
      <td>15.37</td>
      <td>0.041593</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Also, we can consider applying different aggregation functions to different columns of a GroupBy object by passing a dictionary:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;cropHeight&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">],</span> <span class="s1">&#39;prize&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">cropHeight</th>
      <th>prize</th>
    </tr>
    <tr>
      <th></th>
      <th>sum</th>
      <th>std</th>
      <th>sum</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beans</th>
      <td>6.15</td>
      <td>0.149332</td>
      <td>710000</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>8.17</td>
      <td>0.033040</td>
      <td>1140000</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>8.12</td>
      <td>0.128323</td>
      <td>1560000</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>10.30</td>
      <td>0.107703</td>
      <td>1530000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="transformation">
<h2>Transformation<a class="headerlink" href="#transformation" title="Permalink to this heading">#</a></h2>
<p>Unlike aggregation methods, transformation methods return a new DataFrame with the same shape and indexing as the original one but with transformed individual values. Here it is important to note that the transformation must not modify any values in the original DataFrame, meaning that such operations cannot be performed in place.</p>
<p>The most common pandas method to transform the data of a GroupBy object is <code class="docutils literal notranslate"><span class="pre">apply()</span></code>. For example, it can be helpful for computing the z-score, or any function that could be applied on an element by element basis. For instance, when working numerical values of different scales, one might choose to apply a  normalization method, which role is to constraint the scale of the output while not loosing the information in it.</p>
<p>The score is computed by negating each value by the average value of the whole column and dividing it by the standard deviation.</p>
<p>$<span class="math notranslate nohighlight">\(\tilde{x} = \frac{x-  \bar{x}}{\sigma}\)</span>$.</p>
<p>The z-score is function written in a lambda fashion, is passed as an argument to the apply method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Norm</span><span class="p">(</span><span class="n">val_</span><span class="p">):</span>
    <span class="n">x_bar</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">val_</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">val_</span><span class="p">)</span>
    <span class="n">std_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">val_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x_bar</span><span class="o">/</span><span class="n">std_</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[[</span><span class="s1">&#39;prize&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>prize</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">beans</th>
      <th>2</th>
      <td>0.704361</td>
    </tr>
    <tr>
      <th>7</th>
      <td>-1.144586</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0.440225</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">coffee</th>
      <th>1</th>
      <td>0.990756</td>
    </tr>
    <tr>
      <th>6</th>
      <td>-0.403641</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.623809</td>
    </tr>
    <tr>
      <th>12</th>
      <td>-1.210924</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">maize</th>
      <th>3</th>
      <td>1.404879</td>
    </tr>
    <tr>
      <th>8</th>
      <td>-0.561951</td>
    </tr>
    <tr>
      <th>11</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>-0.842927</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">wheat</th>
      <th>0</th>
      <td>1.119391</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.718415</td>
    </tr>
    <tr>
      <th>5</th>
      <td>-0.467805</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1.035854</td>
    </tr>
    <tr>
      <th>14</th>
      <td>-0.969025</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We might also define your own custom function and apply to a grouped data. Please note that each sub-function within the custom function must provide an aggregated value</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#just define your own function</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="k">def</span> <span class="nf">custom_calculation</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function sums the values withing a group, add 2 and divide it by the number of elements</span>
<span class="sd">    within a group multiplied by 10&quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">m</span> 
</pre></div>
</div>
</div>
</div>
<div class="math notranslate nohighlight">
\[  val = \frac{\sum (group) +2}{10 \times Card(group)}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[[</span><span class="s1">&#39;prize&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">custom_calculation</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>prize</th>
    </tr>
    <tr>
      <th>grainType</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>beans</th>
      <td>23666.733333</td>
    </tr>
    <tr>
      <th>coffee</th>
      <td>28500.050000</td>
    </tr>
    <tr>
      <th>maize</th>
      <td>39000.050000</td>
    </tr>
    <tr>
      <th>wheat</th>
      <td>30600.040000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="filtration">
<h2>Filtration<a class="headerlink" href="#filtration" title="Permalink to this heading">#</a></h2>
<p>Filtration methods discard the groups or particular rows from each group based on a predefined condition and return a subset of the original data. For example, we may want to keep only the values of a certain column from all the groups where the group mean for that column is greater than a predefined value. In the case of our DataFrame, let’s filter out all the groups with a group mean for the <code class="docutils literal notranslate"><span class="pre">cropHeight</span></code> column smaller than 2.5  and keep only this column in the output.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[</span><span class="s1">&#39;cropHeight&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>grainType
beans     2.0500
coffee    2.0425
maize     2.0300
wheat     2.0600
Name: cropHeight, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>In order to get the groups where the mean is smaller than 2.5, we use the filter function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">group_grType</span><span class="p">[</span><span class="s1">&#39;cropHeight&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">2.05</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1     2.05
3     2.18
6     2.08
8     2.06
10    2.00
11    2.01
12    2.04
15    1.87
Name: cropHeight, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>We use the corresponding indices to reconstruct the dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grain_prize</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">group_grType</span><span class="p">[</span><span class="s1">&#39;cropHeight&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">2.05</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">,:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>birth_country</th>
      <th>gender</th>
      <th>grainType</th>
      <th>cropHeight</th>
      <th>cropWidth</th>
      <th>prize</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Lucien Nirina</td>
      <td>Madagadscar</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.05</td>
      <td>3.03</td>
      <td>420000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Garba Kone</td>
      <td>Burkina Faso</td>
      <td>Male</td>
      <td>maize</td>
      <td>2.18</td>
      <td>3.03</td>
      <td>440000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sylvie Kurwa</td>
      <td>Rwanda</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.08</td>
      <td>3.18</td>
      <td>230000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Maria Siphiwe</td>
      <td>Botswana</td>
      <td>Female</td>
      <td>maize</td>
      <td>2.06</td>
      <td>3.10</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Touadoum Nobre</td>
      <td>Chad</td>
      <td>Male</td>
      <td>coffee</td>
      <td>2.00</td>
      <td>3.11</td>
      <td>370000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Ebale Gervais</td>
      <td>Cameroon</td>
      <td>Male</td>
      <td>maize</td>
      <td>2.01</td>
      <td>3.14</td>
      <td>390000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Fatema Nourdin</td>
      <td>Morocco</td>
      <td>Female</td>
      <td>coffee</td>
      <td>2.04</td>
      <td>3.08</td>
      <td>120000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Aicha Boumediene</td>
      <td>Algeria</td>
      <td>Female</td>
      <td>maize</td>
      <td>1.87</td>
      <td>3.09</td>
      <td>360000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<blockquote>
<div></div></blockquote>
<div class="section" id="font-color-800080-task-14-font-a-class-anchor-id-task-1-a">
<h3><font color=#800080>Task 14:</font> <a class="anchor" id="Task-1"></a><a class="headerlink" href="#font-color-800080-task-14-font-a-class-anchor-id-task-1-a" title="Permalink to this heading">#</a></h3>
</div>
<p>The Arba Minch University in Ethiopia has been chosen by the African Union to store files related to Nobel Prize Winners. As Data Analyst working with African Union, you have the task to group some informatio from that database in order to understand some patterns from Nobel Prize winners. be it, their gender, continent of birht, prize category, etc. The fie is given to you in a csv file as <code class="docutils literal notranslate"><span class="pre">nobel_winners.csv</span></code>.</p>
<ol class="arabic simple">
<li><p>What is the purpose of the Nobel Prize according to you?</p></li>
<li><p>Load the data. Which field African-born personalities have mostly won the Nobel Prize? What does that tell us?</p></li>
<li><p>Do you recall the last two African Winners of the Prize? What were their contributions?</p></li>
</ol>
<p>Use the <code class="docutils literal notranslate"><span class="pre">groupby</span></code> function and answer the questions below:</p>
<ol class="arabic simple" start="4">
<li><p>How many women were allowed the Nobel Prize? How many of them where African?</p></li>
<li><p>Out of the winners that were born in Africa, what is the average of and the minimal winning prize for men and women?</p></li>
<li><p>What are the categories of winners whose adjusted amount prize average is smaller than $6.000.000 ?</p></li>
<li><p>List all of the Africa-born winner in those categories? Any women? If so, in which category?</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gap_data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="mi">5</span><span class="n">c5159763a1f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">gap_data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;gap_data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<blockquote>
<div></div></blockquote>
<div class="section" id="id1">
<h3><font color=#800080>Task 15:</font> <a class="anchor" id="Task-1"></a><a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
</div>
<p>Consider the gapminder dataset here saved as <code class="docutils literal notranslate"><span class="pre">gapminder.tsv</span></code> and adress the following questions:</p>
<ol class="arabic simple">
<li><p>What was the life Expectancy average adn standard deviation  across various continents before the year 2000?</p></li>
<li><p>Group the data by decades using the tollowing pattern</p>
<ul class="simple">
<li><p>1950 &lt; year &lt; 1960 ==&gt;  “d50”</p></li>
<li><p>1960 &lt; year &lt; 1970 ==&gt;  “d60”</p></li>
<li><p>1970 &lt; year &lt; 1980 ==&gt;  “d70”
…</p></li>
</ul>
</li>
</ol>
<p>Provide the lowest and largest population, the lowest and largest life expectancy for each of the decade</p>
<ol class="arabic simple" start="3">
<li><p>Write a code that provide the corresponding countries for each of the above. What historical facts could you derive from the insights you have obtained</p></li>
</ol>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./part_1"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="04_Handling%20Text%20Data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 4: Handling Text Data</p>
      </div>
    </a>
    <a class="right-next"
       href="06_Basic%20Data%20Explorations.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 6: Basic Data Explorations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#splitting">Splitting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#font-color-800080-task-15-font-a-class-anchor-id-task-1-a"><font color="#800080">Task 15:</font> <a class="anchor" id="Task-1"></a></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applying">Applying</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transformation">Transformation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtration">Filtration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#font-color-800080-task-14-font-a-class-anchor-id-task-1-a"><font color="#800080">Task 14:</font> <a class="anchor" id="Task-1"></a></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><font color="#800080">Task 15:</font> <a class="anchor" id="Task-1"></a></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Rockefeller
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>